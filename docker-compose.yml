version: "3.9"

services:
  baseline-agent-cli:
    image: python:3.11-slim
    working_dir: /app/baseline-agent-cli
    volumes:
      - .:/app
    command: >-
      bash -c "pip install -e '.[dev]' && janus-baseline-agent-cli"
    environment:
      BASELINE_AGENT_CLI_HOST: 0.0.0.0
      BASELINE_AGENT_CLI_PORT: 8001
      BASELINE_AGENT_CLI_OPENAI_API_KEY: ${BASELINE_AGENT_CLI_OPENAI_API_KEY:-}
      BASELINE_AGENT_CLI_OPENAI_BASE_URL: ${BASELINE_AGENT_CLI_OPENAI_BASE_URL:-}
    ports:
      - "8001:8001"

  baseline-langchain:
    image: python:3.11-slim
    working_dir: /app/baseline-langchain
    volumes:
      - .:/app
    command: >-
      bash -c "pip install -e '.[dev]' && janus-baseline-langchain"
    environment:
      BASELINE_LANGCHAIN_HOST: 0.0.0.0
      BASELINE_LANGCHAIN_PORT: 8002
      BASELINE_LANGCHAIN_OPENAI_API_KEY: ${BASELINE_LANGCHAIN_OPENAI_API_KEY:-dummy}
      BASELINE_LANGCHAIN_OPENAI_BASE_URL: ${BASELINE_LANGCHAIN_OPENAI_BASE_URL:-http://baseline-agent-cli:8001/v1}
      BASELINE_LANGCHAIN_TAVILY_API_KEY: ${BASELINE_LANGCHAIN_TAVILY_API_KEY:-}
      BASELINE_LANGCHAIN_CHUTES_API_KEY: ${BASELINE_LANGCHAIN_CHUTES_API_KEY:-}
    depends_on:
      - baseline-agent-cli
    ports:
      - "8002:8002"
